!function(){"use strict";angular.module("app",["ngAnimate","angular-loading-bar","ui.bootstrap","ui.router","LocalStorageModule","cgBusy"])}(),function(){function t(t){return{scope:{focus:"=focusMe"},link:function(e,o){e.$watch("focus",function(e){e===!0&&t(function(){o[0].focus()})})}}}angular.module("app").directive("focusMe",t),t.$inject=["$timeout"]}(),function(){function t(t){function e(){function e(){n.currentPage>1&&(console.log("enter here first"),n.ampersand({currentPage:n.currentPage})),console.log(n.currentPage),console.log(n.size),console.log("directive continues down the code");var e=t.SetPaginationCounter(n.itemsPerPage,n.size,n.currentPage);n.begin=e.begin,n.end=e.end}function o(){e()}var n=this;n.PageChanged=e,o()}return{restrict:"EA",scope:{itemsPerPage:"=",size:"=",currentPage:"=",ampersand:"&"},controller:e,controllerAs:"vm",bindToController:!0,templateUrl:"app/core/templates/myPagination.html"}}angular.module("app").directive("myPagination",t),t.$inject=["FlightBoardService"]}(),function(){function t(){function t(){}return{restrict:"EA",scope:{reservations:"="},bindToController:!0,templateUrl:"app/core/templates/reservation.html",controller:t,controllerAs:"vm"}}angular.module("app").directive("reservationGrid",t),t.$inject=[]}(),function(){"use strict";function t(t,e){function o(e){var o=t.PostLogin(e);return o.then(function(t){a("authenticationData",{accessToken:t.token,user:t.user,accessTokenExpires:t.expires})}),o}function n(t){return e.get(t)}function r(t){for(var e in u.dataInStorage)i(u.dataInStorage[e])}function a(t,o){e.set(t,o)}function i(t){return e.remove(t)}var u=this;u.dataInStorage=["authenticationData","Configuration"];var s={LoginUser:o,GetLocalDataStorage:n,LogOut:r};return s}angular.module("app").factory("AuthenticationService",t),t.$inject=["LoginService","localStorageService"]}(),function(){"use strict";function t(t,e,o,n,r){function a(t){t.headers=t.headers||{};var e=r.get("authenticationData");return e&&(t.headers["x-access-token"]=e.accessToken),t}return{request:a}}angular.module("app").factory("AuthenticationInterceptorService",t),t.$inject=["$q","$injector","$window","$timeout","localStorageService"]}(),function(){angular.module("app").constant("AuthenticationSettings",{AuthenticationAPI:"https://resourceserver.herokuapp.com/login",ResourcesAPI:"https://resourceserver.herokuapp.com/"})}(),function(){function t(t,e){function o(e){t.set(a.ConfigKey,e)}function n(){return t.get(a.ConfigKey)}function r(){return e.GetLocalDataStorage("authenticationData")}var a=this;return a.ConfigKey="Configuration",{GetConfiguration:n,SetConfiguration:o,GetCurrentUserData:r}}angular.module("app").factory("CurrentUserService",t),t.$inject=["localStorageService","AuthenticationService"]}(),function(){function t(){function t(t){return moment().add(t,g.hourSymbol).format(g.dateTimeFormat)}function e(t){var e=moment(t);return e.format(g.timeFormat)}function o(t){return moment(t).format(g.dateFormat)}function n(t){return moment(t).format(g.dateTimeFormat)}function r(t){return moment(t).format(g.timeFormat)}function a(t,e,o){switch(o){case"a":return moment(t,g.dateFormat).add(e,g.hourSymbol).format(g.dateFormat);case"s":return moment(t,g.dateFormat).subtract(e,g.hourSymbol).format(g.dateFormat)}}function i(){return moment().format(g.dateFormat)}function u(){return moment().format(g.timeFormat)}function s(){return g.dateFormats}function c(){return g.dateOptions}function l(){return g.altInputFormats}function m(t){var e=moment(t,g.dateFormat),o={year:e.year(),day:e.date(),month:e.month()};return o}function p(t,e,o){var n=moment(t),r=moment(e);return r.diff(n,o)}function f(t){return moment(t).format(g.dateFormats[1])}function d(){return moment().format(g.dateFormats[1])}var g=this;g.date=new moment,g.dateFormat="M/DD/YYYY",g.dateTimeFormat="M/DD/YYYY HH:mm",g.timeFormat="HH:mm",g.hourSymbol="h",g.dateFormats=["dd-MMMM-yyyy","YYYY-MM-DD","dd.MM.yyyy","MM/dd/yyyy","shortDate"],g.dateOptions={formatYear:"yy",startingDay:1,showWeeks:!0},g.altInputFormats=["M!/d!/yyyy"];var h={AddHoursToTodaysDateTime:t,SetHoursToDate:a,FormatDate:o,FormatDateTime:n,FormatTime:r,FormatDateYear:f,FormatMomentDateYear:d,GetTimeFromDateTime:e,GetTodaysDate:i,GetTodaysTime:u,GetDateFormats:s,GetDateOptions:c,GetAltInputFormats:l,GetDateParts:m,GetDifference:p};return h}angular.module("app").factory("DateTimeService",t),t.$inject=[]}(),function(){"use strict";function t(t,e){function o(o){var n=t.defer();return e(o).success(function(t,e,o,r){n.resolve(t)}).error(function(t,e,o,r){n.reject(t)}),n.promise}return{Go:o}}angular.module("app").factory("HttpRequestService",t),t.$inject=["$q","$http"]}(),function(){function t(t,e){function o(o){t.Go({method:"GET",url:e.ResourcesAPI+"api/Lookup/GetCpaBases"}).then(function(t){var e=[];for(var n in t)e.push({BaseId:t[n].BaseId,Iata:t[n].Iata});o(null,e)})["catch"](function(t){o(t,null)})}var n=this;return n.basePromise=void 0,{FormatBases:o}}angular.module("app").factory("LookupService",t),t.$inject=["HttpRequestService","AuthenticationSettings"]}(),function(){function t(){function t(t){return null===t||void 0===t||0===t.length}function e(t){return null===t||void 0===t||0===t.trim().length}return{IsObjectNull:t,IsPropertyEmpty:e}}angular.module("app").factory("HelperMethodsService",t),t.$inject=[]}(),function(){"use strict";function t(t){t.interceptors.push("AuthenticationInterceptorService")}angular.module("app").config(t),t.$inject=["$httpProvider"]}(),function(){"use strict";function t(t,e,o,n){t.$on("$stateChangeStart",function(t,r,a,i,u){var s=n.GetLocalDataStorage("authenticationData"),c="root.login",l="root.simpleLogin",m="root";(s||r.name!=c)&&(s&&r.name==c&&(t.preventDefault(),o(function(){e.go("root.appLayout.dashboard")})),s||l===r.name||(t.preventDefault(),o(function(){e.go("root.login")})),s&&r.name==m&&o(function(){e.go("root.appLayout.dashboard")}))})}angular.module("app").run(t),t.$inject=["$rootScope","$state","$timeout","AuthenticationService"]}(),angular.module("app").value("cgBusyDefaults",{message:"",templateUrl:"app/core/templates/customSplashScreen.html"}),function(){"use strict";function t(t,e){t.ok=function(){e.dismiss("")}}angular.module("app").controller("WarningModalController",t),t.$inject=["$scope","$uibModalInstance"]}(),function(){"use strict";function t(t,e){t.state("root",{url:"",views:{rootLayout:{templateUrl:"app/main/rootLayout/rootLayout.html"}}}).state("root.login",{url:"/login",templateUrl:"app/main/login/login.html",controller:"LoginController",controllerAs:"vm"}).state("root.simpleLogin",{url:"/simplelogin",templateUrl:"app/main/simpleLogin/simpleLogin.html",controller:"SimpleLoginController",controllerAs:"vm"}).state("root.appLayout",{url:"/app",templateUrl:"app/main/application/appLayout.html",controller:"AppLayoutController",controllerAs:"vm"}).state("root.appLayout.dashboard",{url:"/dashboard",templateUrl:"app/main/dashboard/dashboard.html",controller:"DashboardController",controllerAs:"vm"}).state("root.appLayout.admin",{url:"/admin",templateUrl:"app/main/admin/admin.html",controller:"AdminController",controllerAs:"vm"}).state("root.appLayout.checkIn",{url:"/checkIn",templateUrl:"app/main/checkIn/checkIn.html",controller:"CheckInController",controllerAs:"vm"}).state("root.appLayout.report",{url:"/report",templateUrl:"app/main/report/report.html",controller:"ReportController",controllerAs:"vm"})}angular.module("app").config(t),t.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function t(t,e,o,n,r){function a(){l.userName=l.authenticationData.user.username,console.log(l.userName),console.log("hello"),s()}function i(){n.LogOut(),o.path("/login")}function u(){l.isSideNavClosed=!l.isSideNavClosed}function s(){t.$on("toggleSideNav",function(t,e){l.isSideNavClosed=e.close})}function c(t){e.go(t)}var l=this;l.isSideNavClosed=!1,l.state=e,l.authenticationData=n.GetLocalDataStorage("authenticationData"),l.title="AppLayout Controller",l.userName=void 0,l.Logout=i,l.Open=u,l.NavigateTo=c,a()}angular.module("app").controller("AppLayoutController",t),t.$inject=["$scope","$state","$location","AuthenticationService","CurrentUserService"]}(),function(){"use strict";function t(t,e,o,n,r){function a(){}var i=this;i.title="Dashboard Controller",a()}angular.module("app").controller("DashboardController",t),t.$inject=["$scope","$state","LookupService","CurrentUserService","DateTimeService"]}(),function(){function t(t){function e(){}var o=this;o.title="Index Controller",t.title="Index Controller",o.httpRequestPromise=void 0,t.$on("loadSplashScreen",function(t,e){o.httpRequestPromise=e.httpPromise}),e()}angular.module("app").controller("IndexController",t),t.$inject=["$scope"]}(),function(){"use strict";function t(t,e,o){function n(){if(!a.loginForm.$invalid){a.displayError=!1;var n={grant_type:"password",username:a.userCredentails.username,password:a.userCredentails.password};a.loginPromise=o.LoginUser(n),t.$emit("loadSplashScreen",{httpPromise:a.loginPromise}),a.loginPromise.then(function(t){e.go("root.appLayout.dashboard")})["catch"](function(t){a.displayError=!0,null!==t&&"ad_error"===t.error?a.errorMessage="You have entered the wrong username or password":null!==t&&void 0!==t||(a.errorMessage="Login Connectivity has been lost"),console.log(t)})}}function r(){}var a=this;a.title="Login Controller",a.loginPromise=void 0,a.displayError=void 0,a.errorMessage=void 0,a.userCredentails={},a.loginUser=n,r()}angular.module("app").controller("LoginController",t),t.$inject=["$scope","$state","AuthenticationService"]}(),function(){"use strict";function t(t,e){function o(o){var n={userObject:{email:o.username,password:o.password}};return t.Go({method:"POST",url:e.AuthenticationAPI,data:n,headers:{"Content-type":"application/json"}})}return{PostLogin:o}}angular.module("app").factory("LoginService",t),t.$inject=["HttpRequestService","AuthenticationSettings"]}(),function(){function t(t,e){function o(e){s[e]=!0,t(function(){s[e]=!1},200),n(e),r(),i()}function n(t){for(var e in s.numbers)if(s.numbers[e].text===t){s.passcode.push(s.numbers[e].id);break}}function r(){var t=s.passcode.length-1;s.smallCircles[t]=!0}function a(t){t("Error",null)}function i(){6==s.passcode.length&&a(function(o,n){o&&(console.log(o),s.passcode=[],t(function(){for(var t in s.smallCircles)s.smallCircles[t]=!1},300)),n&&e.go("root.login")})}function u(){var t=s.passcode.length-1;s.smallCircles[t]=!1,s.passcode.splice(t,1)}var s=this;s.passcode=[],s.numbers=[{id:"1",text:"one"},{id:"2",text:"two"},{id:"3",text:"three"},{id:"4",text:"four"},{id:"5",text:"five"},{id:"6",text:"six"},{id:"7",text:"seven"},{id:"8",text:"eight"},{id:"9",text:"nine"},{id:"0",text:"zero"}],s.smallCircles=[!1,!1,!1,!1,!1,!1],s.ClickedCircle=o,s.DeletePasscode=u}angular.module("app").controller("SimpleLoginController",t),t.$inject=["$timeout","$state"]}(),function(){"use strict";function t(t,e,o,n,r){function a(){p();var t=o.GetQuestions();t.then(function(t){if(t&&t.data){var e=t.data.rows;f.question1=e[0],console.log(f.question1),f.question2=e[1],f.question3=e[2],console.log(e)}})}function i(){if(f.question1Response&&f.question1Response.length>0){f.showQuestion1=!f.showQuestion1;var t={response:f.question1Response,questionid_fk:f.question1.questionid,type:c(),visitid_fk:l()},e=o.PostQuestion(t);e.then(function(t){console.log(t),f.showQuestion2=!f.showQuestion2,m(t&&t.data?t.data.visitid:0)})}}function u(){if(f.question2Response&&f.question2Response.length>0){f.showQuestion2=!f.showQuestion2;var t={response:f.question2Response,questionid_fk:f.question2.questionid,type:c(),visitid_fk:l()},e=o.PostQuestion(t);e.then(function(t){console.log(t),f.showQuestion3=!f.showQuestion3})["catch"](function(t){})}}function s(){if(f.question2Response&&f.question2Response.length>0){f.showQuestion3=!f.showQuestion3;var t={response:f.question3Response,questionid_fk:f.question3.questionid,type:c(),visitid_fk:l()},e=o.PostQuestion(t);e.then(function(t){console.log(t),f.showQuestion4=!f.showQuestion4})["catch"](function(t){console.log(t)})}}function c(){return"Kiosk"}function l(){return f.VisitId}function m(t){f.VisitId=t}function p(){f.VisitId=0}var f=this;f.title="CheckIn Controller",f.showQuestion1=!0,f.showQuestion2=!1,f.showQuestion3=!1,f.Next2=i,f.Next3=u,f.Next4=s,a()}angular.module("app").controller("CheckInController",t),t.$inject=["$scope","$state","CheckInService","CurrentUserService","DateTimeService"]}(),function(){"use strict";function t(t,e){function o(){return t.Go({method:"GET",url:e.ResourcesAPI+"api/checkin/getQuestions"})}function n(o){return console.log(o),t.Go({method:"POST",url:e.ResourcesAPI+"api/checkin/postQuestion",data:o})}return{GetQuestions:o,PostQuestion:n}}angular.module("app").factory("CheckInService",t),t.$inject=["HttpRequestService","AuthenticationSettings"]}(),function(){"use strict";function t(){}angular.module("app").controller("RootController",t),t.$inject=[]}(),function(){function t(t){function e(){if(!u.FilterForm.$invalid){var t=moment(u.FilterObject.startTime),e=t.get("hour"),o=t.get("minute"),n=moment(u.FilterObject.startDate);n.set("hour",e),n.set("minute",o);var r=n.format("YYYY-MM-DD H:mm"),i=n.format("YYYY-MM-DD");a(r,i)}}function o(){u.FilterObject={startDate:null,startTime:null},u.Total={Count:0,Users:[]},u.Pool={Count:0,Users:[],Percent:0},u.Gym={Count:0,Users:[],Percent:0},u.GymPool={Count:0,Percent:0}}function n(){u.FilterObject.startDate=moment().format("MM/DD/YYYY");var t=moment();t.set("hour",6),t.set("minute",0),u.FilterObject.startTime=t}function r(){var t=moment().set("hour",6).set("minute",0);return[t.format("YYYY-MM-DD H:mm"),t.format("YYYY-MM-DD")]}function a(e,o){var n=moment().format("Z"),r=t.getFacilityUsage({startDateTime:e,endDate:o,setEven:1,response:"",questionid_fk:1,timeZoneOffset:n}),a=t.getFacilityUsage({startDateTime:e,endDate:o,setEven:0,response:"Pool",questionid_fk:3,timeZoneOffset:n}),i=t.getFacilityUsage({startDateTime:e,endDate:o,setEven:0,response:"Gym",questionid_fk:3,timeZoneOffset:n});t.r([r,a,i],function(t,e){if(t);else{console.log(e),u.Total.Count=e[0].data.rows.length,u.Total.Users=e[0].data.rows,u.Pool.Count=e[1].data.rows.length,u.Pool.Users=e[1].data.rows;var o=u.Pool.Count/u.Total.Count*100;u.Pool.Percent=Math.round(10*o)/10,u.Gym.Count=e[2].data.rows.length,u.Gym.Users=e[2].data.rows;var n=u.Gym.Count/u.Total.Count*100;u.Gym.Percent=Math.round(10*n)/10,u.GymPool.Count=u.Pool.Count+u.Gym.Count;var r=u.GymPool.Count/u.Total.Count*100;u.GymPool.Percent=Math.round(10*r)/10}})}function i(){o(),n();var t=r();a(t[0],t[1])}var u=this;u.SubmitFilterForm=e,i()}angular.module("app").controller("ReportController",t),t.$inject=["ReportService"]}(),function(){function t(t,e,o){function n(o){return t.Go({method:"POST",url:e.ResourcesAPI+"api/checkin/getFacilityUsage",data:o})}function r(t,e){o.all(t).then(function(t){t?e(null,t):e({errorMessage:"No data!"})})["catch"](function(t){e(t)})}return{getFacilityUsage:n,r:r}}angular.module("app").factory("ReportService",["HttpRequestService","AuthenticationSettings","$q",t])}();
//# sourceMappingURL=sourcemap/allminified.min.js.map
