!function(){"use strict";angular.module("app",["ngAnimate","angular-loading-bar","ui.bootstrap","ui.router","LocalStorageModule","cgBusy"])}(),function(){function t(t){return{scope:{focus:"=focusMe"},link:function(e,o){e.$watch("focus",function(e){e===!0&&t(function(){o[0].focus()})})}}}angular.module("app").directive("focusMe",t),t.$inject=["$timeout"]}(),function(){function t(t){function e(){function e(){n.currentPage>1&&(console.log("enter here first"),n.ampersand({currentPage:n.currentPage})),console.log(n.currentPage),console.log(n.size),console.log("directive continues down the code");var e=t.SetPaginationCounter(n.itemsPerPage,n.size,n.currentPage);n.begin=e.begin,n.end=e.end}function o(){e()}var n=this;n.PageChanged=e,o()}return{restrict:"EA",scope:{itemsPerPage:"=",size:"=",currentPage:"=",ampersand:"&"},controller:e,controllerAs:"vm",bindToController:!0,templateUrl:"app/core/templates/myPagination.html"}}angular.module("app").directive("myPagination",t),t.$inject=["FlightBoardService"]}(),function(){function t(){function t(){}return{restrict:"EA",scope:{reservations:"="},bindToController:!0,templateUrl:"app/core/templates/reservation.html",controller:t,controllerAs:"vm"}}angular.module("app").directive("reservationGrid",t),t.$inject=[]}(),function(){"use strict";function t(t,e){function o(e){var o=t.PostLogin(e);return o.then(function(t){a("authenticationData",{accessToken:t.token,user:t.user,accessTokenExpires:t.expires})}),o}function n(t){return e.get(t)}function r(t){for(var e in s.dataInStorage)i(s.dataInStorage[e])}function a(t,o){e.set(t,o)}function i(t){return e.remove(t)}var s=this;s.dataInStorage=["authenticationData","Configuration"];var u={LoginUser:o,GetLocalDataStorage:n,LogOut:r};return u}angular.module("app").factory("AuthenticationService",t),t.$inject=["LoginService","localStorageService"]}(),function(){"use strict";function t(t,e,o,n,r){function a(t){t.headers=t.headers||{};var e=r.get("authenticationData");return e&&(t.headers["x-access-token"]=e.accessToken),t}return{request:a}}angular.module("app").factory("AuthenticationInterceptorService",t),t.$inject=["$q","$injector","$window","$timeout","localStorageService"]}(),function(){angular.module("app").constant("AuthenticationSettings",{AuthenticationAPI:"https://resourceserver.herokuapp.com/login",ResourcesAPI:"https://resourceserver.herokuapp.com/"})}(),function(){function t(t,e){function o(e){t.set(a.ConfigKey,e)}function n(){return t.get(a.ConfigKey)}function r(){return e.GetLocalDataStorage("authenticationData")}var a=this;return a.ConfigKey="Configuration",{GetConfiguration:n,SetConfiguration:o,GetCurrentUserData:r}}angular.module("app").factory("CurrentUserService",t),t.$inject=["localStorageService","AuthenticationService"]}(),function(){function t(){function t(t){return moment().add(t,g.hourSymbol).format(g.dateTimeFormat)}function e(t){var e=moment(t);return e.format(g.timeFormat)}function o(t){return moment(t).format(g.dateFormat)}function n(t){return moment(t).format(g.dateTimeFormat)}function r(t){return moment(t).format(g.timeFormat)}function a(t,e,o){switch(o){case"a":return moment(t,g.dateFormat).add(e,g.hourSymbol).format(g.dateFormat);case"s":return moment(t,g.dateFormat).subtract(e,g.hourSymbol).format(g.dateFormat)}}function i(){return moment().format(g.dateFormat)}function s(){return moment().format(g.timeFormat)}function u(){return g.dateFormats}function c(){return g.dateOptions}function l(){return g.altInputFormats}function m(t){var e=moment(t,g.dateFormat),o={year:e.year(),day:e.date(),month:e.month()};return o}function p(t,e,o){var n=moment(t),r=moment(e);return r.diff(n,o)}function f(t){return moment(t).format(g.dateFormats[1])}function d(){return moment().format(g.dateFormats[1])}var g=this;g.date=new moment,g.dateFormat="M/DD/YYYY",g.dateTimeFormat="M/DD/YYYY HH:mm",g.timeFormat="HH:mm",g.hourSymbol="h",g.dateFormats=["dd-MMMM-yyyy","YYYY-MM-DD","dd.MM.yyyy","MM/dd/yyyy","shortDate"],g.dateOptions={formatYear:"yy",startingDay:1,showWeeks:!0},g.altInputFormats=["M!/d!/yyyy"];var h={AddHoursToTodaysDateTime:t,SetHoursToDate:a,FormatDate:o,FormatDateTime:n,FormatTime:r,FormatDateYear:f,FormatMomentDateYear:d,GetTimeFromDateTime:e,GetTodaysDate:i,GetTodaysTime:s,GetDateFormats:u,GetDateOptions:c,GetAltInputFormats:l,GetDateParts:m,GetDifference:p};return h}angular.module("app").factory("DateTimeService",t),t.$inject=[]}(),function(){"use strict";function t(t,e){function o(o){var n=t.defer();return e(o).success(function(t,e,o,r){n.resolve(t)}).error(function(t,e,o,r){n.reject(t)}),n.promise}return{Go:o}}angular.module("app").factory("HttpRequestService",t),t.$inject=["$q","$http"]}(),function(){function t(t,e){function o(o){t.Go({method:"GET",url:e.ResourcesAPI+"api/Lookup/GetCpaBases"}).then(function(t){var e=[];for(var n in t)e.push({BaseId:t[n].BaseId,Iata:t[n].Iata});o(null,e)})["catch"](function(t){o(t,null)})}var n=this;return n.basePromise=void 0,{FormatBases:o}}angular.module("app").factory("LookupService",t),t.$inject=["HttpRequestService","AuthenticationSettings"]}(),function(){function t(){function t(t){return null===t||void 0===t||0===t.length}function e(t){return null===t||void 0===t||0===t.trim().length}return{IsObjectNull:t,IsPropertyEmpty:e}}angular.module("app").factory("HelperMethodsService",t),t.$inject=[]}(),function(){"use strict";function t(t){t.interceptors.push("AuthenticationInterceptorService")}angular.module("app").config(t),t.$inject=["$httpProvider"]}(),function(){"use strict";function t(t,e,o,n){t.$on("$stateChangeStart",function(t,r,a,i,s){var u=n.GetLocalDataStorage("authenticationData"),c="root.login",l="root.simpleLogin",m="root";(u||r.name!=c)&&(u&&r.name==c&&(t.preventDefault(),o(function(){e.go("root.appLayout.dashboard")})),u||l===r.name||(t.preventDefault(),o(function(){e.go("root.login")})),u&&r.name==m&&o(function(){e.go("root.appLayout.dashboard")}))})}angular.module("app").run(t),t.$inject=["$rootScope","$state","$timeout","AuthenticationService"]}(),angular.module("app").value("cgBusyDefaults",{message:"",templateUrl:"app/core/templates/customSplashScreen.html"}),function(){"use strict";function t(t,e){t.ok=function(){e.dismiss("")}}angular.module("app").controller("WarningModalController",t),t.$inject=["$scope","$uibModalInstance"]}(),function(){"use strict";function t(t,e){t.state("root",{url:"",views:{rootLayout:{templateUrl:"app/main/rootLayout/rootLayout.html"}}}).state("root.login",{url:"/login",templateUrl:"app/main/login/login.html",controller:"LoginController",controllerAs:"vm"}).state("root.simpleLogin",{url:"/simplelogin",templateUrl:"app/main/simpleLogin/simpleLogin.html",controller:"SimpleLoginController",controllerAs:"vm"}).state("root.appLayout",{url:"/app",templateUrl:"app/main/application/appLayout.html",controller:"AppLayoutController",controllerAs:"vm"}).state("root.appLayout.dashboard",{url:"/dashboard",templateUrl:"app/main/dashboard/dashboard.html",controller:"DashboardController",controllerAs:"vm"}).state("root.appLayout.admin",{url:"/admin",templateUrl:"app/main/admin/admin.html",controller:"AdminController",controllerAs:"vm"}).state("root.appLayout.checkIn",{url:"/checkIn",templateUrl:"app/main/checkIn/checkIn.html",controller:"CheckInController",controllerAs:"vm"}).state("root.appLayout.report",{url:"/report",templateUrl:"app/main/report/report.html",controller:"ReportController",controllerAs:"vm"})}angular.module("app").config(t),t.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function t(t,e,o,n,r){function a(){l.userName=l.authenticationData.user.username,console.log(l.userName),console.log("hello"),u()}function i(){n.LogOut(),o.path("/login")}function s(){l.isSideNavClosed=!l.isSideNavClosed}function u(){t.$on("toggleSideNav",function(t,e){l.isSideNavClosed=e.close})}function c(t){console.log(l.state.is("root.appLayout.checkIn")),l.state.is("root.appLayout.checkIn")||e.go(t)}var l=this;l.isSideNavClosed=!1,l.state=e,l.authenticationData=n.GetLocalDataStorage("authenticationData"),l.title="AppLayout Controller",l.userName=void 0,l.Logout=i,l.Open=s,l.NavigateTo=c,a()}angular.module("app").controller("AppLayoutController",t),t.$inject=["$scope","$state","$location","AuthenticationService","CurrentUserService"]}(),function(){"use strict";function t(t,e,o,n,r){function a(){}var i=this;i.title="Dashboard Controller",a()}angular.module("app").controller("DashboardController",t),t.$inject=["$scope","$state","LookupService","CurrentUserService","DateTimeService"]}(),function(){function t(t){function e(){}var o=this;o.title="Index Controller",t.title="Index Controller",o.httpRequestPromise=void 0,t.$on("loadSplashScreen",function(t,e){o.httpRequestPromise=e.httpPromise}),e()}angular.module("app").controller("IndexController",t),t.$inject=["$scope"]}(),function(){"use strict";function t(t,e,o){function n(){if(!a.loginForm.$invalid){a.displayError=!1;var n={grant_type:"password",username:a.userCredentails.username,password:a.userCredentails.password};a.loginPromise=o.LoginUser(n),t.$emit("loadSplashScreen",{httpPromise:a.loginPromise}),a.loginPromise.then(function(t){e.go("root.appLayout.dashboard")})["catch"](function(t){a.displayError=!0,null!==t&&"ad_error"===t.error?a.errorMessage="You have entered the wrong username or password":null!==t&&void 0!==t||(a.errorMessage="Login Connectivity has been lost"),console.log(t)})}}function r(){}var a=this;a.title="Login Controller",a.loginPromise=void 0,a.displayError=void 0,a.errorMessage=void 0,a.userCredentails={},a.loginUser=n,r()}angular.module("app").controller("LoginController",t),t.$inject=["$scope","$state","AuthenticationService"]}(),function(){"use strict";function t(t,e){function o(o){var n={userObject:{email:o.username,password:o.password}};return t.Go({method:"POST",url:e.AuthenticationAPI,data:n,headers:{"Content-type":"application/json"}})}return{PostLogin:o}}angular.module("app").factory("LoginService",t),t.$inject=["HttpRequestService","AuthenticationSettings"]}(),function(){function t(t,e){function o(e){u[e]=!0,t(function(){u[e]=!1},200),n(e),r(),i()}function n(t){for(var e in u.numbers)if(u.numbers[e].text===t){u.passcode.push(u.numbers[e].id);break}}function r(){var t=u.passcode.length-1;u.smallCircles[t]=!0}function a(t){t("Error",null)}function i(){6==u.passcode.length&&a(function(o,n){o&&(console.log(o),u.passcode=[],t(function(){for(var t in u.smallCircles)u.smallCircles[t]=!1},300)),n&&e.go("root.login")})}function s(){var t=u.passcode.length-1;u.smallCircles[t]=!1,u.passcode.splice(t,1)}var u=this;u.passcode=[],u.numbers=[{id:"1",text:"one"},{id:"2",text:"two"},{id:"3",text:"three"},{id:"4",text:"four"},{id:"5",text:"five"},{id:"6",text:"six"},{id:"7",text:"seven"},{id:"8",text:"eight"},{id:"9",text:"nine"},{id:"0",text:"zero"}],u.smallCircles=[!1,!1,!1,!1,!1,!1],u.ClickedCircle=o,u.DeletePasscode=s}angular.module("app").controller("SimpleLoginController",t),t.$inject=["$timeout","$state"]}(),function(){"use strict";function t(t,e,o,n,r,a){function i(){f();var t=o.GetQuestions();t.then(function(t){if(t&&t.data){var e=t.data.rows;d.question1=e[0],console.log(d.question1),d.question2=e[1],d.question3=e[2],console.log(e)}})}function s(){if(d.question1Response&&d.question1Response.length>0){d.showQuestion1=!d.showQuestion1;var t={response:d.question1Response,questionid_fk:d.question1.questionid,type:l(),visitid_fk:m()},e=o.PostQuestion(t);e.then(function(t){console.log(t),d.showQuestion2=!d.showQuestion2,p(t&&t.data?t.data.visitid:0)})}}function u(){if(d.question2Response&&!isNaN(d.question2Response)){d.showQuestion2=!d.showQuestion2;var t={response:d.question2Response,questionid_fk:d.question2.questionid,type:l(),visitid_fk:m()},e=o.PostQuestion(t);e.then(function(t){console.log(t),d.showQuestion3=!d.showQuestion3})["catch"](function(t){})}}function c(){if(d.question2Response&&!isNaN(d.question2Response)){d.showQuestion3=!d.showQuestion3;var t={response:d.question3Response,questionid_fk:d.question3.questionid,type:l(),visitid_fk:m()},e=o.PostQuestion(t);e.then(function(t){console.log(t),d.showQuestion4=!d.showQuestion4,d.displayMessage=!0,a(function(){d.displayMessage=!1,d.showQuestion1=!0,f()},3e3)})["catch"](function(t){console.log(t)})}}function l(){return"Kiosk"}function m(){return d.VisitId}function p(t){d.VisitId=t}function f(){d.VisitId=0,d.question1Response="",d.question2Response="",d.question3Response="",d.question4Response=""}var d=this;d.title="CheckIn Controller",d.showQuestion1=!0,d.showQuestion2=!1,d.showQuestion3=!1,d.displayMessage=!1,d.Next2=s,d.Next3=u,d.Next4=c,i()}angular.module("app").controller("CheckInController",t),t.$inject=["$scope","$state","CheckInService","CurrentUserService","DateTimeService","$timeout"]}(),function(){"use strict";function t(t,e){function o(){return t.Go({method:"GET",url:e.ResourcesAPI+"api/checkin/getQuestions"})}function n(o){return console.log(o),t.Go({method:"POST",url:e.ResourcesAPI+"api/checkin/postQuestion",data:o})}return{GetQuestions:o,PostQuestion:n}}angular.module("app").factory("CheckInService",t),t.$inject=["HttpRequestService","AuthenticationSettings"]}(),function(){"use strict";function t(){}angular.module("app").controller("RootController",t),t.$inject=[]}(),function(){function t(t){function e(){if(!s.FilterForm.$invalid){var t=moment(s.FilterObject.startTime),e=t.get("hour"),o=t.get("minute"),n=moment(s.FilterObject.startDate);n.set("hour",e),n.set("minute",o);var r=n.format("YYYY-MM-DD H:mm"),i=n.format("YYYY-MM-DD");a(r,i)}}function o(){s.FilterObject={startDate:null,startTime:null},s.Total={Count:0,Users:[]},s.Pool={Count:0,Users:[],Percent:0},s.Gym={Count:0,Users:[],Percent:0},s.GymPool={Count:0,Percent:0}}function n(){s.FilterObject.startDate=moment().format("MM/DD/YYYY");var t=moment();t.set("hour",6),t.set("minute",0),s.FilterObject.startTime=t}function r(){var t=moment().set("hour",6).set("minute",0);return[t.format("YYYY-MM-DD H:mm"),t.format("YYYY-MM-DD")]}function a(e,o){var n=moment().format("Z"),r=t.getFacilityUsage({startDateTime:e,endDate:o,setEven:1,setEven2:0,response:"",questionid_fk:1,timeZoneOffset:n}),a=t.getFacilityUsage({startDateTime:e,endDate:o,setEven:0,setEven2:0,response:"Pool",questionid_fk:3,timeZoneOffset:n}),i=t.getFacilityUsage({startDateTime:e,endDate:o,setEven:0,setEven2:0,response:"Gym",questionid_fk:3,timeZoneOffset:n}),u=t.getFacilityUsage({startDateTime:e,endDate:o,setEven:1,setEven2:1,response:"",questionid_fk:0,timeZoneOffset:n});t.r([r,a,i,u],function(e,o){if(e);else{s.Total.Count=o[0].data.rows.length,s.Total.Users=o[0].data.rows,s.Pool.Count=o[1].data.rows.length,s.Pool.Users=o[1].data.rows;var n=s.Pool.Count/s.Total.Count*100;s.Pool.Percent=Math.round(10*n)/10,s.Gym.Count=o[2].data.rows.length,s.Gym.Users=o[2].data.rows;var r=s.Gym.Count/s.Total.Count*100;s.Gym.Percent=Math.round(10*r)/10,s.GymPool.Count=s.Pool.Count+s.Gym.Count;var a=s.GymPool.Count/s.Total.Count*100;s.GymPool.Percent=Math.round(10*a)/10,s.Total.Users=t.parseUsers(o[3].data.rows)}})}function i(){o(),n();var t=r();a(t[0],t[1])}var s=this;s.SubmitFilterForm=e,i()}angular.module("app").controller("ReportController",t),t.$inject=["ReportService"]}(),function(){function t(t,e,o){function n(o){return t.Go({method:"POST",url:e.ResourcesAPI+"api/checkin/getFacilityUsage",data:o})}function r(t){var e={};for(var o in t){var n=t[o].visitid_fk;e[n]?e[n].push(t[o]):e[n]=[t[o]]}var r=[];for(var a in e){var i=e[a],s={name:i[0]?i[0].response:"N/A",houseNumber:i[1]?i[1].response:"N/A",facility:i[2]?i[2].response:"N/A"};i[0]&&(s.createdonlocaltime=moment.parseZone(i[0].createdonlocaltime).format("h:mm a")),r.push(s)}return console.log(r),r}function a(t,e){o.all(t).then(function(t){t?e(null,t):e({errorMessage:"No data!"})})["catch"](function(t){e(t)})}return{getFacilityUsage:n,r:a,parseUsers:r}}angular.module("app").factory("ReportService",["HttpRequestService","AuthenticationSettings","$q",t])}();
//# sourceMappingURL=sourcemap/allminified.min.js.map
